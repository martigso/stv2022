<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.446">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Solveig Bjørkholt og Martin Søyland">

<title>STV2022 – Store tekstdata</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="seminar_notat_files/libs/clipboard/clipboard.min.js"></script>
<script src="seminar_notat_files/libs/quarto-html/quarto.js"></script>
<script src="seminar_notat_files/libs/quarto-html/popper.min.js"></script>
<script src="seminar_notat_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="seminar_notat_files/libs/quarto-html/anchor.min.js"></script>
<link href="seminar_notat_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link class="quarto-color-scheme" id="quarto-text-highlighting-styles" href="seminar_notat_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet">
<link class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles" href="seminar_notat_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet">
<script src="seminar_notat_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="seminar_notat_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link class="quarto-color-scheme" href="seminar_notat_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<link class="quarto-color-scheme quarto-color-alternate" href="seminar_notat_files/libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Innholdsfortegnelse</h2>
   
  <ul>
  <li><a href="#introduksjon" id="toc-introduksjon" class="nav-link active" data-scroll-target="#introduksjon"> <span class="header-section-number">1</span> Introduksjon</a>
  <ul class="collapse">
  <li><a href="#nyttige-ressurser" id="toc-nyttige-ressurser" class="nav-link" data-scroll-target="#nyttige-ressurser"> <span class="header-section-number">1.1</span> Nyttige ressurser</a></li>
  </ul></li>
  <li><a href="#skrape-data" id="toc-skrape-data" class="nav-link" data-scroll-target="#skrape-data"> <span class="header-section-number">2</span> Skrape data</a>
  <ul class="collapse">
  <li><a href="#html-skraping" id="toc-html-skraping" class="nav-link" data-scroll-target="#html-skraping"> <span class="header-section-number">2.1</span> .html-skraping</a></li>
  <li><a href="#xml-skraping" id="toc-xml-skraping" class="nav-link" data-scroll-target="#xml-skraping"> <span class="header-section-number">2.2</span> .xml-skraping</a></li>
  <li><a href="#json-skraping" id="toc-json-skraping" class="nav-link" data-scroll-target="#json-skraping"> <span class="header-section-number">2.3</span> .json-skraping</a></li>
  <li><a href="#curl" id="toc-curl" class="nav-link" data-scroll-target="#curl"> <span class="header-section-number">2.4</span> Curl</a></li>
  <li><a href="#apier" id="toc-apier" class="nav-link" data-scroll-target="#apier"> <span class="header-section-number">2.5</span> APIer</a></li>
  </ul></li>
  <li><a href="#preprosessering" id="toc-preprosessering" class="nav-link" data-scroll-target="#preprosessering"> <span class="header-section-number">3</span> Preprosessering</a>
  <ul class="collapse">
  <li><a href="#sekk-med-ord" id="toc-sekk-med-ord" class="nav-link" data-scroll-target="#sekk-med-ord"> <span class="header-section-number">3.1</span> Sekk med ord</a></li>
  <li><a href="#fjerne-trekk" id="toc-fjerne-trekk" class="nav-link" data-scroll-target="#fjerne-trekk"> <span class="header-section-number">3.2</span> Fjerne trekk?</a></li>
  <li><a href="#rotform-av-ord" id="toc-rotform-av-ord" class="nav-link" data-scroll-target="#rotform-av-ord"> <span class="header-section-number">3.3</span> Rotform av ord</a></li>
  <li><a href="#ngrams" id="toc-ngrams" class="nav-link" data-scroll-target="#ngrams"> <span class="header-section-number">3.4</span> ngrams</a></li>
  <li><a href="#taledeler-parts-of-speech" id="toc-taledeler-parts-of-speech" class="nav-link" data-scroll-target="#taledeler-parts-of-speech"> <span class="header-section-number">3.5</span> Taledeler (parts of speech)</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">STV2022 – Store tekstdata</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Solveig Bjørkholt og Martin Søyland </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<div class="cell">

</div>
<section id="introduksjon" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduksjon</h1>
<p>Her er intro</p>
<section id="nyttige-ressurser" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="nyttige-ressurser"><span class="header-section-number">1.1</span> Nyttige ressurser</h2>
<ul>
<li><a href="https://shinyibv02.uio.no/connect/#/apps/55/access">Arbeidsbøker for R ved UiO</a></li>
<li><a href="https://github.com/liserodland/STV1020">R materiale for STV1020</a></li>
</ul>
</section>
</section>
<section id="skrape-data" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Skrape data</h1>
<p>Skraping er gøy!</p>
<section id="html-skraping" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="html-skraping"><span class="header-section-number">2.1</span> .html-skraping</h2>
<p>Dette kan være lite gøy</p>
</section>
<section id="xml-skraping" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="xml-skraping"><span class="header-section-number">2.2</span> .xml-skraping</h2>
<p>Dette er enklere enn html</p>
</section>
<section id="json-skraping" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="json-skraping"><span class="header-section-number">2.3</span> .json-skraping</h2>
<p>Dette liker jeg ikke. Veldig rar datastrukturering</p>
</section>
<section id="curl" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="curl"><span class="header-section-number">2.4</span> Curl</h2>
<p>Ja, må vi egentlig snakke om curl</p>
</section>
<section id="apier" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="apier"><span class="header-section-number">2.5</span> APIer</h2>
<p>Kanskje bruke Stortinget som eksempel.</p>
</section>
</section>
<section id="preprosessering" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Preprosessering</h1>
<p>Preprosessering er ganske viktig.</p>
<section id="sekk-med-ord" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="sekk-med-ord"><span class="header-section-number">3.1</span> Sekk med ord</h2>
<p><em>Alle</em> tekster er unike!</p>
<p>Ta for eksempel spor 6 på No.4-albumet vi allerede har jobbet med:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>regndans <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">"../data/regndans.txt"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>regndans</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "I kveld er nå, og året, alt av det"                 
 [2] "Bare hele livet"                                    
 [3] "Løpe under busskur når det begynner å hagle"        
 [4] "Ikke rekke flyet, ligge sammen i Botanisk Hage"     
 [5] "Nakenbade i Oslofjorden"                            
 [6] "Ringe på hos noen i nabolaget"                      
 [7] "Lage TV-middager"                                   
 [8] "[?]"                                                
 [9] "Hente i barnehager, altså"                          
[10] "Regndanse i skinnjakke"                             
[11] "Ta T-banen til Hasle"                               
[12] "Drikke hundre glass med øl, ass"                    
[13] "Tusen koppеr kaffe"                                 
[14] "Grille bratwürst på [?]"                            
[15] "Våkne opp mеd dragepust"                            
[16] "Se varmluftsballonger"                              
[17] "Bjørkeblader i august blir gule"                    
[18] "Også rustfarva, og løsne og fly avgårde"            
[19] "Gresstrå på høsten, ass"                            
[20] "Hårfestet begynner å gråne"                         
[21] "Gå hjem og går forbi"                               
[22] "En gutt tar backflip på en trampoline"              
[23] "Se endorfinene krystalliserer seg i smilehulla dine"
[24] "Prøver jeg å si"                                    
[25] "I kveld er hele livet"                              </code></pre>
</div>
</div>
<p>Denne teksten gir oss mening bare ved å lese den. Tolkninger kan variere fra individ til individ og den “riktige” tolkningen (om det finnes en riktig tolkning), er det bare forfatteren som vet hva er. Personlig tolker jeg denne teksten som et utløp for frustrasjon under corona-pandemien, og prospektene ved livet når samfunnet gjenåpnes.</p>
<p>Hovedpoenget er at teksten gir en eller annen form mening. Men hvordan kan vi kvantitativt trekke ut mening fra en tekst som dette? Her kommer en antagelse man gjør i så og si alle typer tekstanalyse inn: sekk med ord-antagelsen eller “Bag of words”. Denne antagelsen sier at hvis man deler opp teksten i segmenter, legger det i en pose, rister posen og heller innholdet ut igjen, skal teksten fortsatt gi mening. Dette er en veldig stor antagelse å gjøre. Hvis vi gjør et eksperiment med eksempelteksten vår, der vi gjør denne prosessen, vil resultatet se ut som dette:</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>bow <span class="ot">&lt;-</span> regndans <span class="sc">%&gt;%</span> <span class="fu">str_split</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">s"</span>) <span class="sc">%&gt;%</span> <span class="fu">unlist</span>()</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">984301</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>bow[<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(bow))]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "begynner"           "kaffe"              "i"                 
  [4] "på"                 "Ta"                 "backflip"          
  [7] "Prøver"             "rustfarva,"         "når"               
 [10] "Gresstrå"           "Drikke"             "skinnjakke"        
 [13] "er"                 "I"                  "på"                
 [16] "I"                  "TV-middager"        "av"                
 [19] "Bare"               "Se"                 "med"               
 [22] "krystalliserer"     "mеd"                "hele"              
 [25] "Se"                 "Bjørkeblader"       "hele"              
 [28] "i"                  "i"                  "hjem"              
 [31] "i"                  "smilehulla"         "jeg"               
 [34] "livet"              "Tusen"              "varmluftsballonger"
 [37] "noen"               "dine"               "det"               
 [40] "i"                  "[?]"                "nå,"               
 [43] "opp"                "avgårde"            "bratwürst"         
 [46] "det"                "endorfinene"        "Hårfestet"         
 [49] "Gå"                 "Hasle"              "gule"              
 [52] "høsten,"            "ass"                "Oslofjorden"       
 [55] "gutt"               "og"                 "barnehager,"       
 [58] "alt"                "og"                 "løsne"             
 [61] "busskur"            "å"                  "året,"             
 [64] "[?]"                "Også"               "til"               
 [67] "Regndanse"          "T-banen"            "altså"             
 [70] "hundre"             "livet"              "Hente"             
 [73] "gråne"              "glass"              "blir"              
 [76] "rekke"              "begynner"           "Våkne"             
 [79] "dragepust"          "forbi"              "er"                
 [82] "hagle"              "tar"                "å"                 
 [85] "koppеr"             "i"                  "Løpe"              
 [88] "på"                 "å"                  "Hage"              
 [91] "Lage"               "si"                 "En"                
 [94] "øl,"                "Ikke"               "og"                
 [97] "en"                 "ass"                "flyet,"            
[100] "sammen"             "nabolaget"          "trampoline"        
[103] "ligge"              "Ringe"              "og"                
[106] "kveld"              "i"                  "fly"               
[109] "under"              "Nakenbade"          "går"               
[112] "Grille"             "kveld"              "hos"               
[115] "på"                 "seg"                "august"            
[118] "Botanisk"          </code></pre>
</div>
</div>
</section>
<section id="fjerne-trekk" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="fjerne-trekk"><span class="header-section-number">3.2</span> Fjerne trekk?</h2>
<section id="punktsetting" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="punktsetting"><span class="header-section-number">3.2.1</span> Punktsetting</h3>
</section>
<section id="stoppord" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="stoppord"><span class="header-section-number">3.2.2</span> Stoppord</h3>
</section>
</section>
<section id="rotform-av-ord" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="rotform-av-ord"><span class="header-section-number">3.3</span> Rotform av ord</h2>
<section id="stemming" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="stemming"><span class="header-section-number">3.3.1</span> Stemming</h3>
</section>
<section id="lemmatisering" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="lemmatisering"><span class="header-section-number">3.3.2</span> Lemmatisering</h3>
</section>
</section>
<section id="ngrams" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="ngrams"><span class="header-section-number">3.4</span> ngrams</h2>
</section>
<section id="taledeler-parts-of-speech" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="taledeler-parts-of-speech"><span class="header-section-number">3.5</span> Taledeler (parts of speech)</h2>
<!-- -->

</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
    } else {
      disableStylesheet(alternateStylesheets);
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb5" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "STV2022 -- Store tekstdata"</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> Solveig Bjørkholt og Martin Søyland</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="an">number-sections:</span><span class="co"> true</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="an">number-depth:</span><span class="co"> 3</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: show</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-depth: 2</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-title: Innholdsfortegnelse</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="an">theme:</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co">  dark: darkly</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co">  light: flatly</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="an">code-block-border-left:</span><span class="co"> "#24D4A7"</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="an">highlight-style:</span><span class="co"> breezedark</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduksjon</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>Her er intro</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a><span class="fu">## Nyttige ressurser</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Arbeidsbøker for R ved UiO</span><span class="co">](https://shinyibv02.uio.no/connect/#/apps/55/access)</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">R materiale for STV1020</span><span class="co">](https://github.com/liserodland/STV1020)</span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a><span class="fu"># Skrape data</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>Skraping er gøy!</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a><span class="fu">## .html-skraping</span></span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>Dette kan være lite gøy</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a><span class="fu">## .xml-skraping</span></span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>Dette er enklere enn html</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a><span class="fu">## .json-skraping</span></span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>Dette liker jeg ikke. Veldig rar datastrukturering</span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a><span class="fu">## Curl</span></span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>Ja, må vi egentlig snakke om curl</span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a><span class="fu">## APIer</span></span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>Kanskje bruke Stortinget som eksempel.</span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a><span class="fu"># Preprosessering</span></span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>Preprosessering er ganske viktig.</span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a><span class="fu">## Sekk med ord</span></span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>*Alle* tekster er unike!</span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>Ta for eksempel spor 6 på No.4-albumet vi allerede har jobbet med:</span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a>regndans <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">"../data/regndans.txt"</span>)</span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a>regndans</span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a>Denne teksten gir oss mening bare ved å lese den. Tolkninger kan variere fra individ til individ og den "riktige" tolkningen (om det finnes en riktig tolkning), er det bare forfatteren som vet hva er. Personlig tolker jeg denne teksten som et utløp for frustrasjon under corona-pandemien, og prospektene ved livet når samfunnet gjenåpnes.</span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a>Hovedpoenget er at teksten gir en eller annen form mening. Men hvordan kan vi kvantitativt trekke ut mening fra en tekst som dette? Her kommer en antagelse man gjør i så og si alle typer tekstanalyse inn: sekk med ord-antagelsen eller "Bag of words". Denne antagelsen sier at hvis man deler opp teksten i segmenter, legger det i en pose, rister posen og heller innholdet ut igjen, skal teksten fortsatt gi mening. Dette er en veldig stor antagelse å gjøre. Hvis vi gjør et eksperiment med eksempelteksten vår, der vi gjør denne prosessen, vil resultatet se ut som dette:</span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a>bow <span class="ot">&lt;-</span> regndans <span class="sc">%&gt;%</span> <span class="fu">str_split</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">s"</span>) <span class="sc">%&gt;%</span> <span class="fu">unlist</span>()</span>
<span id="cb5-93"><a href="#cb5-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">984301</span>)</span>
<span id="cb5-95"><a href="#cb5-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-96"><a href="#cb5-96" aria-hidden="true" tabindex="-1"></a>bow[<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(bow))]</span>
<span id="cb5-97"><a href="#cb5-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-102"><a href="#cb5-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a><span class="fu">## Fjerne trekk?</span></span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-105"><a href="#cb5-105" aria-hidden="true" tabindex="-1"></a><span class="fu">### Punktsetting</span></span>
<span id="cb5-106"><a href="#cb5-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-107"><a href="#cb5-107" aria-hidden="true" tabindex="-1"></a><span class="fu">### Stoppord</span></span>
<span id="cb5-108"><a href="#cb5-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-109"><a href="#cb5-109" aria-hidden="true" tabindex="-1"></a><span class="fu">## Rotform av ord</span></span>
<span id="cb5-110"><a href="#cb5-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-111"><a href="#cb5-111" aria-hidden="true" tabindex="-1"></a><span class="fu">### Stemming</span></span>
<span id="cb5-112"><a href="#cb5-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-113"><a href="#cb5-113" aria-hidden="true" tabindex="-1"></a><span class="fu">### Lemmatisering</span></span>
<span id="cb5-114"><a href="#cb5-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-115"><a href="#cb5-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-116"><a href="#cb5-116" aria-hidden="true" tabindex="-1"></a><span class="fu">## ngrams</span></span>
<span id="cb5-117"><a href="#cb5-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-118"><a href="#cb5-118" aria-hidden="true" tabindex="-1"></a><span class="fu">## Taledeler (parts of speech)</span></span>
<span id="cb5-119"><a href="#cb5-119" aria-hidden="true" tabindex="-1"></a></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>